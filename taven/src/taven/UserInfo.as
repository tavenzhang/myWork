package taven {import com.rover022.display.UserIconMovieClip;import display.BaseModule;import flash.display.MovieClip;import flash.events.Event;import flash.events.MouseEvent;import manger.UserVoDataManger;import taven.enum.EventUtils;import taven.utils.DisplayUtils;import taven.utils.HeadIconBuildTool;public class UserInfo extends BaseModule {    private var _userObject:Object;    public var userInfo_mc:MovieClip;    public var guest_mc:MovieClip;    private var view:res_userInfo;    public var alevel_mc:UserIconMovieClip;//主播等级    public var richlevel_mc:UserIconMovieClip;    public function UserInfo():void {        view = new res_userInfo();        this.userInfo_mc = view.userInfo_mc;        richlevel_mc = new UserIconMovieClip(userInfo_mc, 194, 12);        richlevel_mc.setType(UserIconMovieClip.ICONTYPE_USER);        alevel_mc = new UserIconMovieClip(userInfo_mc, 252, 12);        alevel_mc.setType(UserIconMovieClip.ICONTYPE_ANCHOR);        this.guest_mc = view.guest_mc;        this.addChild(view);        //this.userInfo_mc.visible = false;        this.userInfo_mc.uMoney_txt.autoSize = "left";        this.userInfo_mc.uMoney_txt.wordWrap = false;        this.userInfo_mc.uhead_mc.mask = this.userInfo_mc.mask_mc;        this.userInfo_mc.uinfo_bt.addEventListener(MouseEvent.CLICK, _infoBtClickEvent);        this.userInfo_mc.upay_bt.addEventListener(MouseEvent.CLICK, _payBtClickEvent);        this.userInfo_mc.uRuled_txt.visible = false;        view.guest_mc.visible = false;        this.addEventListener(Event.ADDED_TO_STAGE, _addedToStageEvent);    }    private function _addedToStageEvent(e:Event):void {        this.removeEventListener(Event.ADDED_TO_STAGE, _addedToStageEvent);        this.stage.addEventListener(Event.RESIZE, _resizeStageEvent);        this._resizeStageEvent(null);    }    //------------------尺寸变化    private function _resizeStageEvent(e:Event):void {    }    //---------------------------------用户信息    public function set userObject(_obj:Object):void {        this._userObject = _obj;        alevel_mc.updateByLv(_obj.lv);        richlevel_mc.updateByRlv(_obj.richLv);        DisplayUtils.startAllMovieClip(view.loading_mc);        view.loading_mc.visible = false;        if (int(this._userObject.ruled) != -1) {            this.guest_mc.visible = false;            this.userInfo_mc.visible = true;            if (this._userObject.ruled == 3)//如果是主播            {                richlevel_mc.x = 194;                alevel_mc.showVipIconByVipID(UserVoDataManger.vipInfo.vipLV);            }            else {                richlevel_mc.x = 225;                richlevel_mc.showVipIconByVipID(UserVoDataManger.vipInfo.vipLV);            }            this.formatUserInfo(this._userObject);        } else {            this.guest_mc.visible = true;            this.userInfo_mc.visible = false;        }    }    public function get userObject():Object {        return this._userObject;    }    private function formatUserInfo(_obj:Object):void {        var _mc:MovieClip = this.userInfo_mc;        _mc.uname_txt.text = _obj.name;        _mc.usex_mc.gotoAndStop(int(_obj.sex) + 1);        _mc.uMoney_txt.text = "帐户余额:" + _obj.points;        _mc.uMoney_mc.x = _mc.uMoney_txt.x + _mc.uMoney_txt.width;        _mc.vip_mc.stop();        _mc.vip_mc.visible = false;        alevel_mc.visible = false;        if (int(_obj.ruled) == 3) {            _mc.uRuled_txt.text = "主播";            alevel_mc.visible = true;        } else if (int(_obj.ruled) == 0) {            _mc.uRuled_txt.text = "用户"        } else {            _mc.uRuled_txt.text = "游客"        }        HeadIconBuildTool.loaderUserHead(_obj.headimg, _mc.uhead_mc)    }    //--------------------------------事件    private function _infoBtClickEvent(e:MouseEvent):void {        EventUtils.secndStatusEvent(this, "info");        //this.dispatchEvent(new ktvEvent(null, "info", ktvEvent.KTV_MouseEvent));    }    private function _payBtClickEvent(e:MouseEvent):void {        EventUtils.secndStatusEvent(this, "pay");    }}}